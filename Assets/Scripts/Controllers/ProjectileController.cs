using UnityEngine;
using System.Collections;

public class ProjectileController : MonoBehaviour {
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// 								     		HIDDEN VARIABLES											     ///
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	[HideInInspector] public bool isPlayer = false;
	[HideInInspector] public float range = 7f;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// 								     		PUBLIC VARIABLES											     ///
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	public float speed = 5f;
	public float damage = 50f;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// 								     		PRIVATE VARIABLES											     ///
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	private float _distanceTraveled;
	private Vector3 _origin;
	
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// 								     		PRIVATE FUNCTIONS   										     ///
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/**
	 * @private Called on start of the game object to init variables
	 **/
	void Start () {
		_origin = transform.position;
	}
	
	/**
	 * @private Called 60times per second fixed, handles all processing
	 **/
	void FixedUpdate () {
		_distanceTraveled = Vector2.Distance(transform.position, _origin);

		// If the projectile has gone past its range then destroy it
		if (_distanceTraveled >= range) {
			Destroy(gameObject);
		}
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// 								     		PUBLIC FUNCTIONS											     ///
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/**
	 * @public This function is called when the projectile hits something
	 **/
	public void hit() {
		Destroy(gameObject);
	}
}
